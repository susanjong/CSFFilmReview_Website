<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Update Password</title>
    <link rel="stylesheet" href="/PROJEK AKHIR_PEMWEB/PROJEK PEMWEB AKHIR/sign_form/update_pasword.css"> <!-- Link to your CSS file -->
    <script>
        window.onload = function() {
            const urlParams = new URLSearchParams(window.location.search);
            const error = urlParams.get('error');
            const success = urlParams.get('success');
    
            if (error) {
                let errorMessage = '';
    
                if (error === 'password_mismatch') {
                    errorMessage = 'New passwords do not match. Please try again.';
                } else if (error === 'email_not_found') {
                    errorMessage = 'Email not found. Please check and try again.';
                }
    
                if (errorMessage) {
                    alert(errorMessage);
                    const newURL = window.location.href.split('?')[0]; // Get URL without parameters
                    window.history.replaceState(null, null, newURL);
                }
            }
    
            if (success) {
                if (success === 'password_updated') {
                    alert('Password updated successfully!');

                    const newURL = window.location.href.split('?')[0]; // Get URL without parameters
                    window.history.replaceState(null, null, newURL);
                }
            }
        }
    </script>    
</head>
<body>
    <div class="container">
        <h2 class="text-lg font-bold">Update Password</h2>
        <form id="updatePasswordForm" action="/Handling/update_password.php" method="POST">
            <div>
                <label for="email">Email:</label>
                <input type="email" id="email" name="email" required>
            </div>
            <div>
                <label for="new_password">New Password:</label>
                <input type="password" id="new_password" name="new_password" required>
            </div>
            <div>
                <label for="confirm_new_password">Confirm New Password:</label>
                <input type="password" id="confirm_new_password" name="confirm_new_password" required>
            </div>
            <button type="submit">Update Password</button><br>
            <a href="/PROJEK AKHIR_PEMWEB/PROJEK PEMWEB AKHIR/sign_form/sign.html">
                <button type="button">Back</button>
            </a>            
        </form>
    </div>
    <script src="/PROJEK AKHIR_PEMWEB/PROJEK PEMWEB AKHIR/sign_form/sign.js"></script> <!-- Link to your JavaScript file -->
</body>
</html>